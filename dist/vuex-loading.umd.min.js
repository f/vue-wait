!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.VuexLoading={})}(this,function(t){"use strict";var e={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.status?n("span",{attrs:{width:t.width||"1em",height:t.height||"1em"}},[t._t("spinner"),t._v(" "),n("span",[t._v(t._s(t.message))])],2):t._e(),t._v(" "),t.status?t._e():t._t("default")],2)},staticRenderFns:[],name:"v-loading",props:["when","loader","message","height","width"],computed:{status:function(){return this.when?this.when:this.loader?this.$loading.isLoading(this.loader):this.$loading.anyLoading}}},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o="LOAD",a="END",r=function(t){return t.filter(function(t,e,n){return e==n.indexOf(t)})},s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.useVuex,i=void 0!==n&&n,o=e.moduleName,a=void 0===o?"loading":o,r=e.registerComponents,s=void 0===r||r;this.useVuex=i,this.moduleName=a,this.registerComponents=s,this.initialized=!1,this.store=null}return n(t,[{key:"init",value:function(t,n){var s;if(!this.initialized){this.registerComponents&&t.component(e.name,e);var u={namespaced:!0,state:{activeLoaders:[]},getters:{isLoading:function(t){return function(e){return Array.isArray(e)?t.activeLoaders.some(function(t){return e.includes(t)}):t.activeLoaders.indexOf(e)>-1}},anyLoading:function(t){return t.activeLoaders.length>0}},actions:{load:function(t,e){return(0,t.commit)(o,e)},end:function(t,e){return(0,t.commit)(a,e)}},mutations:(s={},i(s,o,function(t,e){t.activeLoaders.push(e),t.activeLoaders=r(t.activeLoaders)}),i(s,a,function(t,e){t.activeLoaders=r(t.activeLoaders).filter(function(t){return t!==e})}),s)};if(this.useVuex){var d=this.moduleName;this.storage=new t({computed:{isLoading:function(){if(!n)throw new Error("Vuex not initialized.");return n.getters[d+"/isLoading"]},anyLoading:function(){if(!n)throw new Error("Vuex not initialized.");return n.getters[d+"/anyLoading"]}}}),this.store=n,n.registerModule(d,u)}else this.storage=new t({data:{activeLoaders:[]},computed:{isLoading:function(){return u.getters.isLoading(this)},anyLoading:function(){return u.getters.anyLoading(this)}},methods:{startLoading:function(t){u.mutations[o](this,t)},endLoading:function(t){u.mutations[a](this,t)}}});this.initialized=!0}}},{key:"isLoading",value:function(t){return this.storage.isLoading(t)}},{key:"startLoading",value:function(t){this.useVuex?this.store.dispatch(this.moduleName+"/load",t,{root:!0}):this.storage.startLoading(t)}},{key:"endLoading",value:function(t){this.useVuex?this.store.dispatch(this.moduleName+"/end",t,{root:!0}):this.storage.endLoading(t)}},{key:"anyLoading",get:function(){return this.storage.anyLoading}}]),t}();function u(t){u.installed&&t||(u.installed=!0,t.mixin({beforeCreate:function(){var e=this.$options;e.vueLoading?(this.$loading="function"==typeof e.vueLoading?new e.vueLoading:e.vueLoading,this.$loading.init(t,e.store)):e.parent&&e.parent.$loading&&(this.$loading=e.parent.$loading,this.$loading.init(t,e.parent.$store))}}))}s.install=u,t.VueLoading=s,t.install=u,t.createActionHelpers=function(t){var e=t.moduleName,n=function(t,n){t(e+"/end",n,{root:!0})};return{startLoading:function(t,i,o){if(function(t,n){t(e+"/load",n,{root:!0})}(t,i),o)return new Promise(function(e,a){o().then(function(o){e(o),n(t,i)}).catch(function(e){a(e),n(t,i)})})},endLoading:function(t,e){n(t,e)}}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vuex-loading.umd.min.js.map
